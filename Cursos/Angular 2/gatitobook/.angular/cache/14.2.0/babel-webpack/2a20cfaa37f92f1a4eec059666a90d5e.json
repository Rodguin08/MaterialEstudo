{"ast":null,"code":"'use strict';\n\nvar validate = require('aproba');\n\nvar renderTemplate = require('./render-template.js');\n\nvar wideTruncate = require('./wide-truncate');\n\nvar stringWidth = require('string-width');\n\nmodule.exports = function (theme, width, completed) {\n  validate('ONN', [theme, width, completed]);\n\n  if (completed < 0) {\n    completed = 0;\n  }\n\n  if (completed > 1) {\n    completed = 1;\n  }\n\n  if (width <= 0) {\n    return '';\n  }\n\n  var sofar = Math.round(width * completed);\n  var rest = width - sofar;\n  var template = [{\n    type: 'complete',\n    value: repeat(theme.complete, sofar),\n    length: sofar\n  }, {\n    type: 'remaining',\n    value: repeat(theme.remaining, rest),\n    length: rest\n  }];\n  return renderTemplate(width, template, theme);\n}; // lodash's way of repeating\n\n\nfunction repeat(string, width) {\n  var result = '';\n  var n = width;\n\n  do {\n    if (n % 2) {\n      result += string;\n    }\n\n    n = Math.floor(n / 2);\n    /* eslint no-self-assign: 0 */\n\n    string += string;\n  } while (n && stringWidth(result) < width);\n\n  return wideTruncate(result, width);\n}","map":null,"metadata":{},"sourceType":"script"}