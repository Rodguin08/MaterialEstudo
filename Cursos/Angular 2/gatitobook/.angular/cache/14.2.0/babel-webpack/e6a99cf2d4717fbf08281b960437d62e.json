{"ast":null,"code":"const isPackageBin = require('./is-package-bin.js');\n\nconst tarCreateOptions = manifest => ({\n  cwd: manifest._resolved,\n  prefix: 'package/',\n  portable: true,\n  gzip: {\n    // forcing the level to 9 seems to avoid some\n    // platform specific optimizations that cause\n    // integrity mismatch errors due to differing\n    // end results after compression\n    level: 9\n  },\n  // ensure that package bins are always executable\n  // Note that npm-packlist is already filtering out\n  // anything that is not a regular file, ignored by\n  // .npmignore or package.json \"files\", etc.\n  filter: (path, stat) => {\n    if (isPackageBin(manifest, path)) {\n      stat.mode |= 0o111;\n    }\n\n    return true;\n  },\n  // Provide a specific date in the 1980s for the benefit of zip,\n  // which is confounded by files dated at the Unix epoch 0.\n  mtime: new Date('1985-10-26T08:15:00.000Z')\n});\n\nmodule.exports = tarCreateOptions;","map":null,"metadata":{},"sourceType":"script"}