{"ast":null,"code":"// run an npm command\nconst spawn = require('@npmcli/promise-spawn');\n\nmodule.exports = (npmBin, npmCommand, cwd, env, extra) => {\n  const isJS = npmBin.endsWith('.js');\n  const cmd = isJS ? process.execPath : npmBin;\n  const args = (isJS ? [npmBin] : []).concat(npmCommand); // when installing to run the `prepare` script for a git dep, we need\n  // to ensure that we don't run into a cycle of checking out packages\n  // in temp directories.  this lets us link previously-seen repos that\n  // are also being prepared.\n\n  return spawn(cmd, args, {\n    cwd,\n    stdioString: true,\n    env\n  }, extra);\n};","map":null,"metadata":{},"sourceType":"script"}