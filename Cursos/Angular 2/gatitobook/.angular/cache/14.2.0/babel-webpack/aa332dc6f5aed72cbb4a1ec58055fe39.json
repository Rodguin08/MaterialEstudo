{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/*#__PURE__*/\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCacheConfig = exports.updateCacheConfig = void 0;\n\nconst core_1 = /*#__PURE__*/require(\"@angular-devkit/core\");\n\nconst path_1 = /*#__PURE__*/require(\"path\");\n\nconst workspace_schema_1 = /*#__PURE__*/require(\"../../../lib/config/workspace-schema\");\n\nfunction updateCacheConfig(workspace, key, value) {\n  var _a, _b;\n\n  var _c;\n\n  const cli = (_a = (_c = workspace.extensions)['cli']) !== null && _a !== void 0 ? _a : _c['cli'] = {};\n  const cache = (_b = cli['cache']) !== null && _b !== void 0 ? _b : cli['cache'] = {};\n  cache[key] = value;\n  return workspace.save();\n}\n\nexports.updateCacheConfig = updateCacheConfig;\n\nfunction getCacheConfig(workspace) {\n  if (!workspace) {\n    throw new Error(`Cannot retrieve cache configuration as workspace is not defined.`);\n  }\n\n  const defaultSettings = {\n    path: (0, path_1.resolve)(workspace.basePath, '.angular/cache'),\n    environment: workspace_schema_1.Environment.Local,\n    enabled: true\n  };\n  const cliSetting = workspace.extensions['cli'];\n\n  if (!cliSetting || !(0, core_1.isJsonObject)(cliSetting)) {\n    return defaultSettings;\n  }\n\n  const cacheSettings = cliSetting['cache'];\n\n  if (!(0, core_1.isJsonObject)(cacheSettings)) {\n    return defaultSettings;\n  }\n\n  const {\n    path = defaultSettings.path,\n    environment = defaultSettings.environment,\n    enabled = defaultSettings.enabled // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  } = cacheSettings;\n  return {\n    path: (0, path_1.resolve)(workspace.basePath, path),\n    environment,\n    enabled\n  };\n}\n\nexports.getCacheConfig = getCacheConfig;","map":null,"metadata":{},"sourceType":"script"}