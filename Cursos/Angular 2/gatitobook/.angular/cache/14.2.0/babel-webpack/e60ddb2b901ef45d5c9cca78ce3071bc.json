{"ast":null,"code":"// https://github.com/npm/rfcs/pull/183\nconst envVal = val => Array.isArray(val) ? val.map(v => envVal(v)).join('\\n\\n') : val === null || val === false ? '' : String(val);\n\nconst packageEnvs = (env, vals, prefix) => {\n  for (const [key, val] of Object.entries(vals)) {\n    if (val === undefined) {\n      continue;\n    } else if (val && !Array.isArray(val) && typeof val === 'object') {\n      packageEnvs(env, val, `${prefix}${key}_`);\n    } else {\n      env[`${prefix}${key}`] = envVal(val);\n    }\n  }\n\n  return env;\n};\n\nmodule.exports = (env, pkg) => packageEnvs({ ...env\n}, {\n  name: pkg.name,\n  version: pkg.version,\n  config: pkg.config,\n  engines: pkg.engines,\n  bin: pkg.bin\n}, 'npm_package_');","map":null,"metadata":{},"sourceType":"script"}